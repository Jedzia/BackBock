<Main:MainWindowBase x:Class="Jedzia.BackBock.Application.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib" WindowStartupLocation="CenterScreen"
        xmlns:local="clr-namespace:Jedzia.BackBock.Application"
        xmlns:Main="clr-namespace:Jedzia.BackBock.ViewModel.MainWindow;assembly=Jedzia.BackBock.ViewModel" 
                     Title="{Binding MainWindowTitle}"
        Height="850" Width="1200" Background="{DynamicResource ShadeBrush}"
        DataContext="{Binding RelativeSource={RelativeSource Self},Path=MainWindowViewModel}" Initialized="MainWindowBase_Initialized">

  <Main:MainWindowBase.Resources>
  </Main:MainWindowBase.Resources>

  <Grid Margin="10" >
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--<ContentControl Content="{StaticResource MyToolbar}" DataContext="{Binding Path=., RelativeSource={RelativeSource Self}}"/>-->
    <ContentControl Content="{StaticResource MyToolbar}" />

    <Grid Grid.Row="1" Margin="0,10,0,0">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="265"/>
        <ColumnDefinition/>
      </Grid.ColumnDefinitions>
      <!-- Toolbox -->
      <StackPanel Grid.Column="0" Margin="0,0,5,0">
        <Button Content="TEST Me" Click="Button_Click"/>
        <Expander Header="Flow Chart" Content="FlowChartStencils" IsExpanded="True"/>
        <Expander Header="Shapes" Content="ShapeStencils" IsExpanded="True"/>
      </StackPanel>
      <!-- GridSplitter -->
      <GridSplitter Focusable="False" Width="2" Background="LightGray"
              VerticalAlignment="Stretch" HorizontalAlignment="Right"/>
      <!-- Designer -->
      <GroupBox Header="Diagram" Grid.Column="1" Margin="3,0,0,0">
        <ScrollViewer HorizontalScrollBarVisibility="Auto"
              VerticalScrollBarVisibility="Auto">
          <!--Background="{StaticResource WindowBackgroundBrush}"-->
          <local:MyCanvas Focusable="true" x:Name="MyDesigner" Margin="10" FocusVisualStyle="{x:Null}"
                    ContextMenu="{StaticResource DesignerCanvasContextMenu}">
            <local:MyCanvas.Background>
              <DrawingBrush TileMode="Tile" Stretch="Fill" Viewport="0 0 50 50" ViewportUnits="Absolute" ViewboxUnits="Absolute" >
                <DrawingBrush.Drawing>
                  <GeometryDrawing Geometry="M0,0 L0,1 0.03,1 0.03,0.03 1,0.03 1,0 Z" Brush="Gray" />
                </DrawingBrush.Drawing>
              </DrawingBrush>
            </local:MyCanvas.Background>
          </local:MyCanvas>
        </ScrollViewer>
      </GroupBox>
    </Grid>
  </Grid>
</Main:MainWindowBase>
